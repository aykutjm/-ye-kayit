<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Spor KulÃ¼bÃ¼ - Ãœyelik SÃ¶zleÅŸmesi</title>
    <!-- Gerekli KÃ¼tÃ¼phaneler -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    
    <style>
        :root {
            --primary-color: #667eea;
            --secondary-color: #764ba2;
            --dark-green: #2d5a27;
            --light-green: #4a7c59;
            --light-bg: #f8f9ff;
            --border-color: #e1e5e9;
        }
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; background: linear-gradient(135deg, var(--primary-color) 0%, var(--secondary-color) 100%); min-height: 100vh; padding: 20px; color: #333; }
        .container { max-width: 900px; margin: 0 auto; background: white; border-radius: 20px; box-shadow: 0 20px 60px rgba(0,0,0,0.1); overflow: hidden; }
        .header { background: linear-gradient(135deg, var(--dark-green) 0%, var(--light-green) 100%); color: white; padding: 30px; text-align: center; }
        .header h1 { font-size: 2.5em; margin-bottom: 10px; text-shadow: 2px 2px 4px rgba(0,0,0,0.3); }
        .header p { font-size: 1.2em; opacity: 0.9; }
        .form-container { padding: 40px; }
        .form-section { margin-bottom: 30px; padding: 25px; border-radius: 15px; background: var(--light-bg); border-left: 5px solid var(--primary-color); }
        .section-title { font-size: 1.4em; color: var(--dark-green); margin-bottom: 20px; display: flex; align-items: center; gap: 10px; }
        .form-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 20px; }
        .form-group { display: flex; flex-direction: column; }
        label { font-weight: 600; margin-bottom: 8px; font-size: 0.95em; }
        input, select, textarea { padding: 12px 15px; border: 2px solid var(--border-color); border-radius: 10px; font-size: 1em; transition: all 0.3s ease; width: 100%; }
        input:focus, select:focus, textarea:focus { outline: none; border-color: var(--primary-color); box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1); }
        .contract-text { background: white; padding: 25px; border-radius: 10px; border: 2px solid var(--border-color); height: 400px; overflow-y: auto; font-size: 0.85em; line-height: 1.6; }
        .signature-section { background: #fff; border: 2px dashed var(--primary-color); border-radius: 15px; padding: 30px; text-align: center; }
        .signature-canvas { border: 2px solid var(--border-color); border-radius: 10px; cursor: crosshair; display: block; margin: 20px auto; max-width: 100%; }
        .btn { padding: 12px 25px; border: none; border-radius: 25px; font-size: 1em; font-weight: 600; cursor: pointer; transition: all 0.3s ease; text-transform: uppercase; letter-spacing: 0.5px; }
        .btn-secondary { background: #f8f9fa; color: #6c757d; border: 2px solid var(--border-color); }
        .btn-success { background: linear-gradient(135deg, #28a745 0%, #20c997 100%); color: white; font-size: 1.2em; padding: 15px 40px; }
        .btn:hover { transform: translateY(-2px); box-shadow: 0 10px 25px rgba(0,0,0,0.15); }
        .checkbox-group { display: flex; align-items: flex-start; gap: 15px; margin-top: 20px; }
        .checkbox-group input { width: 20px; height: 20px; margin-top: 3px; flex-shrink: 0;}
        .warning, .info-box { background: #fff3cd; border-left: 5px solid #ffeaa7; color: #856404; padding: 15px; border-radius: 10px; margin: 15px 0; }
        .success-message { background: #d4edda; border: 1px solid #c3e6cb; color: #155724; padding: 20px; border-radius: 15px; text-align: center; margin-top: 20px; display: none; }
    </style>
</head>
<body>
    
    <div class="container" id="main-container">
        <div class="header">
            <h1 id="clubNameHeader">ğŸ¾ BranÅŸ SeÃ§iniz</h1>
            <p>Online Ãœyelik SÃ¶zleÅŸmesi</p>
        </div>
        <div class="form-container">
            <form id="membershipForm">
                <div class="form-section">
                    <h3 class="section-title">â­ BranÅŸ SeÃ§imi</h3>
                    <div class="form-group">
                        <label for="branchSelection">LÃ¼tfen bir branÅŸ seÃ§erek devam edin *</label>
                        <select id="branchSelection" name="Brans" required>
                            <option value="">SeÃ§iniz...</option>
                            <option value="tenis">Tenis</option>
                            <option value="yuzme">YÃ¼zme</option>
                        </select>
                    </div>
                </div>

                <div id="mainFormContent" style="display: none;">
                    <div class="form-section">
                        <h3 class="section-title">ğŸ‘¤ Ãœye / Veli Bilgileri</h3>
                        <div class="form-grid">
                            <div class="form-group"><label for="fullName">Ad Soyad *</label><input type="text" id="fullName" name="Ad_Soyad" required></div>
                            <div class="form-group"><label for="tcno">T.C. Kimlik No *</label><input type="text" id="tcno" name="TC_Kimlik_No" pattern="[0-9]{11}" maxlength="11" required></div>
                            <div class="form-group"><label for="phone">Telefon *</label><input type="tel" id="phone" name="Telefon" required></div>
                            <div class="form-group"><label for="email">E-posta *</label><input type="email" id="email" name="Eposta" required></div>
                        </div>
                        <div class="form-group" style="margin-top: 20px;"><label for="address">Adres *</label><textarea id="address" name="Adres" rows="3" required></textarea></div>
                    </div>
                     <div class="form-section">
                        <h3 class="section-title">ğŸ—“ï¸ Ãœyelik SÃ¼resi</h3>
                        <div class="form-group">
                            <label for="membershipDuration">Ãœyelik SÃ¼resini SeÃ§iniz *</label>
                            <select id="membershipDuration" name="Uyelik_Suresi" required>
                                <option value="">SeÃ§iniz...</option>
                                <option value="AylÄ±k">AylÄ±k</option>
                                <option value="4 AylÄ±k">4 AylÄ±k</option>
                            </select>
                        </div>
                        <div id="monthlyWarning" class="info-box" style="display: none;"><strong>Bilgilendirme:</strong> AylÄ±k Ã¼yeliklerde, Ã¼yeliÄŸinizi sonlandÄ±rmak iÃ§in her ayÄ±n 14'Ã¼ne kadar kayÄ±t sildirmeniz gerekmektedir. Aksi takdirde Ã¼yelik otomatik olarak yenilenir.</div>
                        <div id="fourMonthWarning" class="info-box" style="display: none;"><strong>Bilgilendirme:</strong> 4 aylÄ±k Ã¼yeliklerde, sÃ¼reden Ã¶nce iptal edilen Ã¼yeliklerde sÃ¶zleÅŸme gereÄŸi cayma bedeli tahsil edilir.</div>
                    </div>
                     <div class="form-section">
                        <h3 class="section-title">ğŸ‘¶ ReÅŸit Olmayan Ãœye</h3>
                        <div class="checkbox-group">
                            <input type="checkbox" id="isMinorCheck" name="Resit_Olmayan_Uye_Mi">
                            <label for="isMinorCheck">18 yaÅŸÄ±ndan kÃ¼Ã§Ã¼k bir Ã¼ye iÃ§in dolduruyorum.</label>
                        </div>
                        <div id="minorFields" style="display: none; margin-top: 20px;">
                            <div class="form-grid">
                                <div class="form-group"><label for="minorFullName">ReÅŸit OlmayanÄ±n AdÄ± SoyadÄ± *</label><input type="text" id="minorFullName" name="Resit_Olmayan_Adi_Soyadi"></div>
                                <div class="form-group"><label for="minorDob">ReÅŸit OlmayanÄ±n DoÄŸum Tarihi *</label><input type="date" id="minorDob" name="Resit_Olmayan_Dogum_Tarihi"></div>
                            </div>
                        </div>
                    </div>
                     <div class="form-section">
                        <h3 class="section-title">ğŸ“‹ Ãœyelik SÃ¶zleÅŸmesi</h3>
                        <div class="contract-text" id="contractTextArea"></div>
                        <div class="checkbox-group">
                            <input type="checkbox" id="agreeContract" name="Sozlesme_Onayi" value="Kabul Edildi" required>
                            <label for="agreeContract">Ãœyelik sÃ¶zleÅŸmesini okudum, anladÄ±m ve kabul ediyorum. *</label>
                        </div>
                    </div>
                     <div class="form-section">
                        <h3 class="section-title">âœï¸ Dijital Ä°mza</h3>
                        <div class="signature-section">
                            <p>LÃ¼tfen aÅŸaÄŸÄ±daki alana imzanÄ±zÄ± atÄ±n:</p>
                            <canvas id="signatureCanvas" class="signature-canvas" width="400" height="200"></canvas>
                            <div><button type="button" class="btn btn-secondary" onclick="clearSignature()">Ä°mzayÄ± Temizle</button></div>
                            <div id="signatureWarning" class="warning" style="display: none; margin-top: 15px;"><strong>UyarÄ±:</strong> LÃ¼tfen dijital imzanÄ±zÄ± tamamlayÄ±n.</div>
                        </div>
                    </div>
                    <div style="text-align: center; margin-top: 30px;" id="submit-container">
                        <button type="submit" class="btn btn-success" id="submitBtn">ğŸ“„ SÃ¶zleÅŸmeyi Ä°mzala ve Onayla</button>
                    </div>
                    <div class="success-message" id="successMessage">
                        <h3>DeÄŸerli Ãœyemiz,</h3>
                        <p>Ãœyelik sÃ¶zleÅŸmeniz kulÃ¼bÃ¼mÃ¼ze ulaÅŸmÄ±ÅŸtÄ±r. En kÄ±sa sÃ¼re iÃ§erisinde tarafÄ±nÄ±za WhatsApp Ã¼zerinden iletilecektir.<br><br>Ailemize katÄ±ldÄ±ÄŸÄ±nÄ±z iÃ§in teÅŸekkÃ¼r eder, birlikte keyifli ve saÄŸlÄ±klÄ± bir spor yolculuÄŸu dileriz.</p>
                    </div>
                </div>
            </form>
        </div>
    </div>

<script>
    // --- SABÄ°TLER ---
    const webhookUrl = 'https://n8n.edu-ai.online/webhook-test/10a31aa5-c942-46ec-bc5c-b221c24e5eae';
    const contractTextArea = document.getElementById('contractTextArea');
    
    const clubData = {
        tenis: {
            name: "Atakum Tenis KulÃ¼bÃ¼", icon: "ğŸ¾", officialName: "Atakum Tenis", contactName: "Aykut YILDIRIM", address: "Derecik Mahallesi 1444. Sokak No:1 Ä°lkadÄ±m/Samsun", taxNo: "9540639540", phone: "0544 936 75 43", email: "y.aykut7455@gmail.com"
        },
        yuzme: {
            name: "Mafen Spor KulÃ¼bÃ¼", icon: "ğŸŠ", officialName: "Mafen Spor KulÃ¼bÃ¼", contactName: "Aykut YILDIRIM", address: "Derecik Mahallesi 1444. Sokak No:1 Ä°lkadÄ±m/Samsun", taxNo: "9540639540", phone: "0544 936 75 43", email: "y.aykut7455@gmail.com"
        }
    };

    // --- SÃ–ZLEÅME METNÄ° ---
    const getContractSections = (club, data = null) => {
        const part1 = `<h4>ÃœYELÄ°K SÃ–ZLEÅMESÄ°</h4>
        <p><strong>1-) TARAFLAR</strong><br>
        <strong>A-KULÃœP</strong><br>
        AdÄ±-SoyadÄ± : ${club.contactName}<br>
        ÃœnvanÄ± : ${club.officialName}<br>
        Adres : ${club.address}<br>
        Vergi No : ${club.taxNo}<br>
        Telefon : ${club.phone}<br>
        E-mail : ${club.email}<br>
        Bu sÃ¶zleÅŸmede bundan sonra â€œEÄÄ°TMEN/KULÃœPâ€ olarak anÄ±lacaktÄ±r.<br>
        <strong>B-ÃœYE/VELÄ°</strong><br>
        AdÄ±-SoyadÄ± : ${data ? data.Ad_Soyad : '[Doldurulacak]'}<br>
        Adres : ${data ? data.Adres : '[Doldurulacak]'}<br>
        TCKN : ${data ? data.TC_Kimlik_No : '[Doldurulacak]'}<br>
        Telefon : ${data ? data.Telefon : '[Doldurulacak]'}<br>
        E-mail : ${data ? data.Eposta : '[Doldurulacak]'}<br>
        Bu sÃ¶zleÅŸmede bundan sonra â€œÃœYE/VELÄ°â€ olarak anÄ±lacaktÄ±r. Ãœye ve varsa veliye ait bilgiler yukarÄ±da yer alan kÄ±sma ayrÄ± ayrÄ± yazÄ±larak doldurulacaktÄ±r.</p>
        <p>Ãœye/Veli iÅŸbu sÃ¶zleÅŸmeyi onaylamasÄ± sÄ±rasÄ±nda EÄŸitmen tarafÄ±ndan kendisinden talep edilen her tÃ¼rlÃ¼ bilgiyi eksiksiz ve doÄŸru olarak EÄŸitmene vermeyi kabul etmektedir. Ãœye/Veli, eÄŸitimler sÄ±rasÄ±nda EÄŸitmene bildirdiÄŸi bilgilerin doÄŸruluÄŸundan bizzat sorumludur.</p>
        <p>Ãœye/Veli, iÅŸbu sÃ¶zleÅŸmeye onayÄ± esnasÄ±nda beyan etmiÅŸ olduÄŸu cep telefonu numarasÄ± ve e-posta adresinin EÄŸitmen tarafÄ±ndan yapÄ±lacak her tÃ¼rlÃ¼ bildirim iÃ§in geÃ§erli tebligat mecralarÄ± sayÄ±lacaÄŸÄ±nÄ±, bu cep telefonu numarasÄ± ve e-posta adresinin kullanÄ±mÄ± ile ilgili her tÃ¼rlÃ¼ yetkinin kendisinde olduÄŸunu, ilgili cep telefonu numarasÄ± ve e-posta adresinin 3. kiÅŸiler tarafÄ±ndan kullanÄ±ldÄ±ÄŸÄ± ÅŸÃ¼phesinin varlÄ±ÄŸÄ± halinde bu durumu ve her halde cep telefonu numarasÄ± ve e-posta adresinde meydana gelen deÄŸiÅŸiklikleri EÄŸitmene bildirmekle yÃ¼kÃ¼mlÃ¼ olduÄŸunu kabul ve taahhÃ¼t eder.</p>`;
        
        const part2 = `<p><strong>2-) KONU</strong><br>
        Ä°ÅŸbu Ã¼yelik sÃ¶zleÅŸmesi, Ã¼yelik iÅŸlemlerinin gerÃ§ekleÅŸtirilmesi ile iÅŸbu sÃ¶zleÅŸmenin onaylanmasÄ± suretiyle, EÄŸitmen tarafÄ±ndan sunulacak hizmetin ÅŸartlarÄ±nÄ± ve taraflarÄ±n karÅŸÄ±lÄ±klÄ± hak ve yÃ¼kÃ¼mlÃ¼lÃ¼klerini dÃ¼zenlemektedir.</p>
        <p><strong>3-) SÃœRE</strong><br>
        SÃ¶zleÅŸme sÃ¼resi aylÄ±k ve 6 aylÄ±k periyotlar halinde dÃ¼zenlenmekte olup; kayÄ±tlar sÃ¶zleÅŸmenin biteceÄŸi ayÄ±n 15â€™inden Ã¶nce iptal edilmediÄŸi takdirde aylÄ±k veya 6 aylÄ±k olarak uzatÄ±lmÄ±ÅŸ sayÄ±lmaktadÄ±r. KayÄ±t silinmediÄŸi takdirde yeni dÃ¶neme iliÅŸkin Ã¼cret Ãœye/Veli tarafÄ±ndan kulÃ¼be Ã¶denecektir.</p>
        <p><strong>4-) ÃœCRET</strong><br>
        Ãœyelik bedeli, Ãœyelik satÄ±ÅŸ formunda belirtilen Ã¼yelik paketine gÃ¶re .... Ay, aylÄ±k.. TL olup; iÅŸbu bedel Ãœye/Veli tarafÄ±ndan Ã¶denecektir.</p>
        <p><strong>5-) Ã–DEMELER</strong><br>
        Ã–demelerin her ayÄ±n 20â€™sine kadar belirtilen hesaba yapÄ±lmasÄ± gerekmektedir. DÃ¶nem tarihlerine gÃ¶re eksik ya da fazla Ã¶deme durumu oluÅŸabilir. Ã–demelerin zamanÄ±nda yapÄ±lmamasÄ± durumunda; Ãœye/Veli, yapacaÄŸÄ± Ã¶demenin %25â€™i tutarÄ±nda cezai ÅŸart Ã¶demeyi kabul ve taahhÃ¼t eder.</p>
        <p>YapÄ±lan Ã¶demeler, derslere katÄ±lÄ±m taahhÃ¼dÃ¼ olarak kabul edilir. Ãœyenin derslere katÄ±lamamasÄ± sebebiyle Ã¼cret iadesi yapÄ±lmaz.</p>
        <p><strong>6-) ÃœYELÄ°K Ä°PTALLERÄ°</strong><br>
        Her ayÄ±n 14â€™Ã¼ kayÄ±t sildirme iÃ§in son gÃ¼ndÃ¼r. Bu tarihler sonrasÄ±nda yapÄ±lan kayÄ±t sildirmelerde yeni dÃ¶nem Ã¼creti tahsil edilir. KulÃ¼be veya kulÃ¼p tesislerine zarar verici davranÄ±ÅŸlarda bulunulmasÄ± durumunda kulÃ¼p Ã¼yeliÄŸi sonlandÄ±rÄ±labilir.</p>`;

        const part3 = `<p>1) DaimÃ® HastalÄ±k<br>
        Ãœyenin, Ã¼yelik sÃ¼resi iÃ§erisinde derslere gelmesini veya derslerdeki aktivitelere katÄ±lmasÄ±nÄ± engelleyecek daimÃ® bir hastalÄ±ÄŸa tutulmasÄ± ve bu durumun tam teÅŸekkÃ¼llÃ¼ devlet hastanesinden alÄ±nmÄ±ÅŸ heyet raporu ile belgelenmesi halinde Ã¼yelik iptal edilir. Ãœyenin Ã¼yelik Ã¼cretinin tamamÄ±nÄ± Ã¶demiÅŸ olmasÄ± durumunda, kullanÄ±lmayan sÃ¼reye ait Ã¶denen Ã¼cretten %.10kesinti yapÄ±larak, kalan tutar faizsiz olarak Ãœye/Veliye iade edilir. KullanÄ±lan hizmet sÃ¼resinin bedeli iade olunmaz. Ãœye/Veli, bu madde gereÄŸince iÅŸlem yapÄ±labilmesi iÃ§in, hastalÄ±ÄŸa iliÅŸkin raporunu Ã¼st yazÄ± ile birlikte EÄŸitmene verecektir. HastalÄ±ÄŸa iliÅŸkin raporun, rapor tarihinden itibaren en geÃ§ 10 gÃ¼n iÃ§erisinde verilmesi gerekmektedir. GeÃ§ verilen rapor ve dilekÃ§eler iÅŸlem gÃ¶rmeyecek, geÃ§ersiz kabul edilecektir.</p>
        <p>2) EÄŸitmenin Tek TaraflÄ± Fesih HakkÄ±<br>
        EÄŸitmen taraflar arasÄ±ndaki iÅŸbu sÃ¶zleÅŸmeyi her zaman 5 gÃ¼n Ã¶nceden bildirimde bulunmak kaydÄ±yla herhangi bir gerekÃ§e gÃ¶stermeksizin tek taraflÄ± olarak feshedebilir.</p>
        <p>Ãœye/Veli, iÅŸbu sÃ¶zleÅŸmeyi imzalayarak bu maddeyi peÅŸinen kabul etmiÅŸ sayÄ±lÄ±r. Bu durumda EÄŸitmen Ãœyenin kullanÄ±lmayan sÃ¼reye iliÅŸkin Ãœyelik Ã¼cretini Ã¶demiÅŸ olmasÄ± durumunda, Ã¶demiÅŸ olduÄŸu Ã¼creti faizsiz olarak 5 gÃ¼n iÃ§erisinde Ãœye/Veliye iade edecektir.</p>
        <p>AyrÄ±ca EÄŸitmen haklÄ± bir nedenin varlÄ±ÄŸÄ± halinde sÃ¶zleÅŸmeyi herhangi bir sÃ¼re olmaksÄ±zÄ±n derhal tek taraflÄ± olarak da feshedebilir. Bu durumda, Ã¼yenin Ã¼yelik Ã¼cretinin kullanÄ±lmayan kÄ±smÄ± iade edilmez.</p>
        <p><strong>7-) EÄÄ°TÄ°ME Ä°LÄ°ÅKÄ°N KURALLAR</strong><br>
        A) Ãœyelik ÅartlarÄ± ile Ãœye/Velinin Hak ve YÃ¼kÃ¼mlÃ¼lÃ¼kleri<br>
        1) EÄŸitmen, her tÃ¼rlÃ¼ Ã¼yelik talebini hiÃ§bir gerekÃ§e gÃ¶stermeksizin tek taraflÄ± olarak reddetme hakkÄ±na sahiptir.<br>
        2) EÄŸitmenden, suÃ§ iÅŸlememiÅŸ ve herhangi bir yÃ¼z kÄ±zartÄ±cÄ± suÃ§tan sabÄ±ka kaydÄ± bulunmayan T.C. vatandaÅŸlarÄ± ile yabancÄ± uyruklu kiÅŸiler ders alabilir. EÄŸitmenin bu hususa iliÅŸkin adli sicil belgesi (sabÄ±ka kaydÄ±) talep etme ve deÄŸerlendirme hakkÄ± saklÄ±dÄ±r.<br>
        3) EÄŸitmen Ãœye/Veliden, bulaÅŸÄ±cÄ± hastalÄ±klar gibi toplumu veya diÄŸer Ãœye/Velilerin saÄŸlÄ±ÄŸÄ±nÄ± tehlikeye dÃ¼ÅŸÃ¼rebilecek bir hastalÄ±ÄŸÄ±nÄ±n bulunmadÄ±ÄŸÄ±na dair saÄŸlÄ±k raporu ya da tahlil sonucu talep edebilir. SÃ¶z konusu tahliller sonucunda bulaÅŸÄ±cÄ± hastalÄ±k ve benzeri bir bulguya rastlanmasÄ± halinde EÄŸitmen, ÃœyeliÄŸi yapacaÄŸÄ± bir fesih bildirimi ile sona erdirme hakkÄ±na haizdir.</p>
        <p>4) Ãœye/Veli, Ã¼yelik iÃ§in gerekli olan her tÃ¼rlÃ¼ belgeyi eksiksiz ve doÄŸru bir ÅŸekilde temin edecek; Ã¼yelik onayÄ± iÃ§in ve/veya Ã¼yeliÄŸin devamÄ± sÄ±rasÄ±nda EÄŸitmen tarafÄ±ndan talep edilecek her tÃ¼rlÃ¼ bilgi, belge, rapor vb. hususlarÄ± derhal temin ederek EÄŸitmene ibraz edecektir.</p>
        <p>5) Ãœyelerin spor faaliyetine katÄ±lmak iÃ§in gerekli saÄŸlÄ±k ÅŸartlarÄ±nÄ± taÅŸÄ±yÄ±p taÅŸÄ±madÄ±klarÄ±, spor aktivitesine uygun olup olmadÄ±klarÄ±, tÄ±bbi kontrollerini yaptÄ±rÄ±p yaptÄ±rmadÄ±klarÄ± veya saÄŸlÄ±k danÄ±ÅŸmanlarÄ±nÄ±n yaptÄ±ÄŸÄ± tÄ±bbi tavsiyelerden ya da bunlarÄ±n neticelerinden dolayÄ± EÄŸitmenin herhangi bir sorumluluÄŸu bulunmamaktadÄ±r. Ãœye/Veli, Ã¼yelik sÃ¶zleÅŸmesini imzaladÄ±ÄŸÄ± andan itibaren; saÄŸlÄ±k durumunun spor yapmaya elveriÅŸli olduÄŸunu, spor faaliyetine katÄ±lmasÄ±na engel bir Ã¶zrÃ¼ ve rahatsÄ±zlÄ±ÄŸÄ±nÄ±n bulunmadÄ±ÄŸÄ±nÄ±, faaliyete katÄ±lmasÄ±nÄ±n saÄŸlÄ±ÄŸÄ±na ve fiziksel durumuna bir zarar vermeyeceÄŸini beyan ve taahhÃ¼t etmiÅŸtir.</p>`;
        
        const part4 = `<p>6) Ãœyelerin, ders veya aktivitelerden faydalanmamalarÄ± halinde dahi belirlenen bedelleri zamanÄ±nda ve tam olarak Ã¶demeleri zorunludur. Ãœyelerin yapÄ±lacak aktivitelerden veya verilecek derslerden yararlanmamalarÄ± hiÃ§bir ÅŸekil ve ÅŸartta Ãœye/Veliye Ã¼yelik bedelini Ã¶dememe hakkÄ± vermemektedir. Ãœye derslerden yararlanmasa dahi Ãœyelika bedellerini Ã¶demek zorundadÄ±r.</p>
        <p>7) Ãœye/Veli, kendisinin veya misafirlerinin ÅŸahsi kusurlarÄ±, dikkatsizliÄŸi veya ihmalleri ile; kulÃ¼be veya 3. KiÅŸilere ait eÅŸyalar Ã¼zerinde meydana getirecekleri tÃ¼m hasar ve zarardan ve yine diÄŸer Ãœye/Velilerin yahut EÄŸitmen Ã§alÄ±ÅŸanlarÄ±nÄ±n ve 3. kiÅŸilerin uÄŸramÄ±ÅŸ olduÄŸu tÃ¼m zarar ve kayÄ±plardan sorumludur.</p>
        <p>B) KULÃœP KURALLARI<br>
        a) Grup dersleri aylÄ±k 8 derstir.<br>
        b) Grup derslerinde ders bir kez iÅŸlendiÄŸinden, Ã¼yenin katÄ±lamadÄ±ÄŸÄ± dersler iÃ§in telafi yapÄ±lmaz.<br>
        c) Ã–zel ders paketleri 1 aylÄ±k sÃ¼reyle geÃ§erlidir. Bu sÃ¼re iÃ§inde kullanÄ±lmayan ders haklarÄ± bir sonraki aya devredilmez.<br>
        d) Spor branÅŸlarÄ±nda herhangi bir kaza, yaralanma veya saÄŸlÄ±k problemi durumunda sorumluluk tamamen Ãœye/Veliye aittir.<br>
        e) KayÄ±t sildirme iÅŸlemi yapÄ±ldÄ±ÄŸÄ±nda sistem Ã¼zerinden tÃ¼m kiÅŸisel verileriniz ve kayÄ±t bilgileriniz silinir.<br>
        f) Ãœyelerin derse zamanÄ±nda, uygun kÄ±yafetle ve hazÄ±r ÅŸekilde gelmesi Ãœye/Velilerin sorumluluÄŸundadÄ±r.<br>
        g) KayÄ±t silme talebinde bulunan Ã¶ÄŸrencinin kalan dersleri mevcut dÃ¶nem tarihleri iÃ§erisinde yapÄ±lÄ±r.</p>
        <p>C) GENEL KURALLAR<br>
        1) KulÃ¼p bÃ¼nyesinde Ãœye/Veliler genel nezaket kurallarÄ±na uymakla yÃ¼kÃ¼mlÃ¼dÃ¼rler. Kort iÃ§inde veya dÄ±ÅŸÄ±nda nezaket kurallarÄ±na uymayan davranÄ±ÅŸlarda bulunan, huzuru kaÃ§Ä±ran, hakaret, kÃ¼fÃ¼r kullanan Ãœye/Velilerin Ãœye/Velilikleri herhangi bir uyarÄ±ya gerek kalmadan resen iptal edilebilir. Bu takdirde Ãœye/Velilik bedelleri kÄ±smen dahi geri Ã¶denmez.<br>
        2) KayÄ±p eÅŸyalardan KulÃ¼p sorumlu deÄŸildir.<br>
        3) Ãœye/Veli ruhsatlÄ± bile olsa KulÃ¼p'e delici, kesici ve patlayÄ±cÄ± alet veya silahla giremez. Aksi hallerde Ãœye/Veli KulÃ¼p'e giremeyecektir.<br>
        4) Ãœye/Velinin KapalÄ± alanlarda ve KulÃ¼p tarafÄ±ndan yasaklanan alanlarda sigara iÃ§mesi kesinlikle yasaktÄ±r.<br>
        5) KulÃ¼p iÃ§ine dÄ±ÅŸarÄ±dan yiyecek iÃ§ecek getirmek yasaktÄ±r.<br>
        6) Soyunma odalarÄ±ndaki dolaplar gÃ¼nlÃ¼k kullanÄ±m iÃ§indir. Ãœye/Velinin tek dolap kullanÄ±m hakkÄ± vardÄ±r.<br>
        7) Ãœye/Veliler, tÃ¼m eÅŸyalarÄ±nÄ± dolap iÃ§ine koymalÄ±, dolap kapaklarÄ±na ve/veya dÄ±ÅŸÄ±na herhangi bir eÅŸya asmamalÄ± ve dolaplarÄ±nÄ± kilitlemelidirler. Dolaplar kullanÄ±m sonrasÄ± tamamen boÅŸaltÄ±lmalÄ±dÄ±r.<br>
        8) Dolap iÃ§inde cep telefonlarÄ± sessiz konumda bÄ±rakÄ±lmalÄ±dÄ±r.</p>
        <p>9) GÃ¼nlÃ¼k dolaplar kullanÄ±m sonrasÄ± boÅŸ ve aÃ§Ä±k olarak bÄ±rakÄ±lmalÄ±dÄ±r. KulÃ¼p, hijyen ve gÃ¼venlik nedenleri ile gÃ¼n sonunda kilitli dolaplarÄ± gÃ¶revli yÃ¶netici eÅŸliÄŸinde aÃ§ma ve iÃ§indeki eÅŸyalarÄ± boÅŸaltma hakkÄ±na sahiptir. Dolapta bÄ±rakÄ±lan eÅŸyanÄ±n kaybolmasÄ±ndan veya hasarÄ±ndan KulÃ¼p sorumlu tutulamaz.</p>
        <p>10) Soyunma odalarÄ±nda gÃ¶rÃ¼ntÃ¼/ses kaydÄ± yapÄ±lmasÄ± kesinlikle yasaktÄ±r. Aksi davranÄ±ÅŸta bulunanlarÄ±n tespiti halinde, KulÃ¼p tarafÄ±ndan her tÃ¼rlÃ¼ hak saklÄ± tutulmak kaydÄ± ile Ãœye/Velilik feshi hÃ¼kÃ¼mleri uygulanabilecektir. Ãœye/Veli, soyunma odalarÄ±nda gerÃ§ekleÅŸtirilen gÃ¶rÃ¼ntÃ¼/ses kaydÄ±nÄ±n sonuÃ§larÄ±ndan KulÃ¼p'Ã¼n hiÃ§bir sorumluluÄŸu olmadÄ±ÄŸÄ±nÄ± kabul, beyan ve taahhÃ¼t eder.</p>
        <p>11) Soyunma odalarÄ±nda Ã¶zel ve deÄŸerli eÅŸya bÄ±rakÄ±lmamalÄ±dÄ±r. BÄ±rakÄ±lan eÅŸyalarÄ±n kaybolmasÄ±ndan veya hasarÄ±ndan KulÃ¼p sorumlu tutulamaz.</p>`;

        const part5 = `<p>12) KulÃ¼p, sunduÄŸu hizmetler ve Ã§alÄ±ÅŸmalar ile ilgili kurallar ve uygulamalarda, zaman ve ihtiyaca baÄŸlÄ± deÄŸiÅŸiklikler yapabilir, yeni maddeler ilave edebilir. Olabilecek bÃ¼tÃ¼n deÄŸiÅŸiklikler Ãœye/Velilere bildirilir.</p>
        <p>13) Tesisin tÃ¼m alanlarÄ±nda Ãœye/Velilerin hijyeni, saÄŸlÄ±ÄŸÄ± ve gÃ¼venliÄŸi dÃ¼ÅŸÃ¼nÃ¼lerek hazÄ±rlanan prosedÃ¼r ve kullanÄ±m kurallarÄ±na uyulmasÄ± zorunludur.</p>
        <p>14) KulÃ¼p sÄ±nÄ±rlarÄ± iÃ§erisinde (aÃ§Ä±k ve kapalÄ± alan fark etmeksizin) sigara iÃ§mek yasaktÄ±r.</p>
        <p><strong>8- KÄ°ÅÄ°SEL VE Ã–ZEL NÄ°TELÄ°KLÄ° KÄ°ÅÄ°SEL VERÄ°LERÄ°N Ä°ÅLENMESÄ°</strong><br>
        Ãœye/Veli, iÅŸbu sÃ¶zleÅŸmeye taraf olma suretiyle, verdiÄŸi tÃ¼m bilgilerin ve/veya Ãœye/Velilik iliÅŸkisinin devamÄ±na herhangi bir suretle KulÃ¼p'e verdiÄŸi tÃ¼m kiÅŸisel bilgilerinin, saÄŸlÄ±k geÃ§miÅŸi bilgilerinin, Ãœye/Velilik sÃ¼resince elde edilen kiÅŸisel ve Ã¶zel nitelikli kiÅŸisel verilerinin, Ãœye/Velilik bedelinin Ã¶denmesiyle baÄŸlantÄ±lÄ± olarak elektronik ve diÄŸer ortamlarda verilen/verilecek bilgilerin, "Veri Sorumlusu" sÄ±fatÄ±yla KulÃ¼p tarafÄ±ndan ve KulÃ¼p ortaklarÄ±, iÅŸ ortaklarÄ±, halefleri ve/veya bunlarÄ±n belirleyeceÄŸi Ã¼Ã§Ã¼ncÃ¼ kiÅŸiler tarafÄ±ndan, mezkur verilerin gizliliklerinin korunmasÄ± iÃ§in gerekli tedbirleri almak ve kiÅŸisel verilerin iÅŸlenmesine dair kanuni ilkelere uymak suretiyle otomatik olan/olmayan yÃ¶ntemler ile alÄ±nmasÄ±na, devralÄ±nmasÄ±na, yasal sÃ¼reler aÅŸÄ±lmamak Ã¼zere yurt iÃ§inde ve/veya yurt dÄ±ÅŸÄ±nda yazÄ±lÄ±/dijital arÅŸivlere kaydedilmesine, depolanmasÄ±na, muhafaza edilmesine, elde edilebilir hale getirilmesine, kullanÄ±lmasÄ±na, gÃ¼ncellenmesine, deÄŸiÅŸtirilmesine, yeniden dÃ¼zenlenmesine, sÄ±nÄ±flandÄ±rÄ±lmasÄ±na, yurt iÃ§inde veya yurt dÄ±ÅŸÄ±na aktarÄ±lmasÄ±na ve sair kanunlara uygun ÅŸekilde herhangi bir suretle iÅŸlenmesine, bu hususta KulÃ¼p tarafÄ±ndan Ã§eÅŸitli mecralar Ã¼zerinden aydÄ±nlatÄ±lmÄ±ÅŸ ve yasal haklarÄ± hakkÄ±nda bilgilirilmiÅŸ olarak aÃ§Ä±kÃ§a izin(rÄ±za/onay) verdiÄŸini kabul, beyan ve taahhÃ¼t eder.</p>
        <p>1. Veri Sorumlusu:<br>Aykut YILDIRIM<br>Adres<br>Telefon<br>E-posta</p>
        <p>2. KiÅŸisel Verilerin Ä°ÅŸlenme AmaÃ§larÄ±:<br>KiÅŸisel verileriniz; Ãœye/Velilik iÅŸlemleri, spor etkinliklerine katÄ±lÄ±m yÃ¶netimi, iletiÅŸim faaliyetleri, gÃ¼venlik kayÄ±tlarÄ±nÄ±n tutulmasÄ±, kulÃ¼p iÃ§i bilgilendirme ve organizasyon amaÃ§larÄ±yla iÅŸlenmektedir. AyrÄ±ca yasal yÃ¼kÃ¼mlÃ¼lÃ¼klerimizi yerine getirmek, hukuki taleplere yanÄ±t vermek ve sizinle iletiÅŸim kurmak amacÄ±yla da kullanÄ±lmaktadÄ±r.</p>
        <p>3. Toplanan KiÅŸisel Veriler:<br>Ad, soyad, iletiÅŸim bilgileri, doÄŸum tarihi, spor etkinliklerine iliÅŸkin bilgiler gibi kiÅŸisel veriler toplanmaktadÄ±r.</p>
        <p>4. KiÅŸisel Verilerin Ä°ÅŸlenme Hukuki Sebepleri:<br>Verileriniz, KVKK'nÄ±n 5. ve 6. maddeleri kapsamÄ±nda; aÃ§Ä±k rÄ±za, sÃ¶zleÅŸmenin kurulmasÄ± veya ifasÄ±, yasal yÃ¼kÃ¼mlÃ¼lÃ¼klerin yerine getirilmesi, haklarÄ±n tesisi, kullanÄ±lmasÄ± veya korunmasÄ± gibi hukuki sebepler doÄŸrultusunda iÅŸlenmektedir.</p>
        <p>5. KiÅŸisel Verilerin Saklama SÃ¼resi:<br>KiÅŸisel verileriniz, iÅŸlenme amacÄ±nÄ±n gerektirdiÄŸi sÃ¼re boyunca saklanacak, bu sÃ¼renin sonunda silinecek veya anonim hale getirilecektir.</p>
        <p>6. KiÅŸisel Veri Sahiplerinin HaklarÄ±:<br>KVKK uyarÄ±nca veri sahipleri;<br>â€¢ KiÅŸisel verilerinin iÅŸlenip iÅŸlenmediÄŸini Ã¶ÄŸrenme,<br>â€¢ Ä°ÅŸlenmiÅŸse buna iliÅŸkin bilgi talep etme,<br>â€¢ Ä°ÅŸleme amacÄ±nÄ± ve amaca uygun kullanÄ±lÄ±p kullanÄ±lmadÄ±ÄŸÄ±nÄ± Ã¶ÄŸrenme,<br>â€¢ Verilerin aktarÄ±ldÄ±ÄŸÄ± Ã¼Ã§Ã¼ncÃ¼ kiÅŸileri bilme,<br>â€¢ Eksik veya yanlÄ±ÅŸ iÅŸlenmiÅŸ verilerin dÃ¼zeltilmesini isteme,<br>â€¢ Verilerin silinmesini veya yok edilmesini talep etme,<br>â€¢ Bu iÅŸlemlerin Ã¼Ã§Ã¼ncÃ¼ kiÅŸilere bildirilmesini isteme,<br>â€¢ Otomatik sistemlerle analiz sonucu aleyhe Ã§Ä±kan sonuÃ§lara itiraz etme hakkÄ±na sahiptir.</p>`;
        
        const part6 = `<p><strong>9-) SON HÃœKÃœMLER</strong><br>
        1) Bu anlaÅŸmanÄ±n uygulanmasÄ±ndan kaynaklanan tÃ¼m ihtilaflarda Samsun mahkemeleri ve icra daireleri yetkilidir.</p>
        <p>2) TaraflarÄ±n sÃ¶zleÅŸmenin giriÅŸinde unvanlarÄ± altÄ±nda adresler sÃ¶zleÅŸme uyarÄ±nca kanuni tebligat adresleri olarak kabul edilecek ve bu adreslere yapÄ±lan tebligatlar kendilerine yapÄ±lmÄ±ÅŸ sayÄ±lacaktÄ±r. Taraflardan biri adresinde meydana gelen deÄŸiÅŸikliÄŸi 5 (beÅŸ) gÃ¼n iÃ§erisinde diÄŸer tarafa bildirmediÄŸi takdirde yukarÄ±daki yer alan adreslere Tebligat Kanunu hÃ¼kÃ¼mleri dahilinde yapÄ±lacak ihbar ve tebligat muteber olacaktÄ±r.</p>
        <p>3)Ãœye/Veli, cep telefonu ve/veya e-mail adres deÄŸiÅŸikliÄŸini yazÄ±lÄ± olarak EÄŸitmene bildirmediÄŸi takdirde, bildirmiÅŸ olduÄŸu cep telefonu ve/veya e-posta adresine yapÄ±lacak bildirimlerin geÃ§erli olacaÄŸÄ±nÄ± ve kendisine tebligatÄ±n yapÄ±lmÄ±ÅŸ sayÄ±lacaÄŸÄ±nÄ± kabul, beyan ve taahhÃ¼t eder. Ä°ÅŸbu Ã¼yelik nedeniyle yapÄ±lacak her tÃ¼rlÃ¼ bildirim, sÃ¶zleÅŸmenin kabulÃ¼ sÄ±rasÄ±nda, Ã¼ye tarafÄ±ndan bildirilen cep telefonu ve/veya e posta adresine gÃ¶nderilecek mesaj aracÄ±lÄ±ÄŸÄ± ile saÄŸlanacaktÄ±r.</p>
        <p>ÃœYE/VELÄ° EÄÄ°TMEN<br>
        -ReÅŸit olmayan katÄ±lÄ±mcÄ±larÄ±n velileri veya vasileri iÃ§in Ãœye, iÅŸbu belge ile aÅŸaÄŸÄ±da adÄ± geÃ§en katÄ±lÄ±mcÄ± iÃ§in yasal sorumluluÄŸu olan bir veli/vasi olarak, yukarÄ±da belirtilen ÅŸekilde ÅŸahsÄ±n ibrasÄ±na muvafakat ettiÄŸini ve ibrayÄ± kabul ettiÄŸini beyan eder. YaÅŸÄ± kÃ¼Ã§Ã¼k Ã§ocuÄŸunun saÄŸlanan programlara katÄ±lÄ±mÄ± veya programlarla iliÅŸkisi nedeniyle meydana gelen her tÃ¼rlÃ¼ sorumluluk doÄŸuran olaylardan dolayÄ± KulÃ¼p'Ã¼, sahibini, ortaklarÄ±nÄ± ve Ã§alÄ±ÅŸanlarÄ±nÄ± sorumlu tutmayacaÄŸÄ±nÄ± taahhÃ¼t eder.</p>
        <p>ReÅŸit OlmayanÄ±n AdÄ± ve SoyadÄ±:<br>ReÅŸit OlmayanÄ±n DoÄŸum Tarihi:<br>Velisinin/Vasisinin AdÄ± ve SoyadÄ±:<br>Velisinin/Vasisinin Ä°mzasÄ±:</p>`;

        return [part1, part2, part3, part4, part5, part6];
    };
    
    // --- FORM Ä°NTERAKTÄ°VÄ°TESÄ° ---
    const branchSelection = document.getElementById('branchSelection');
    const mainFormContent = document.getElementById('mainFormContent');
    const clubNameHeader = document.getElementById('clubNameHeader');

    branchSelection.addEventListener('change', function() {
        const selectedBranchKey = this.value;
        if (selectedBranchKey) {
            const selectedClub = clubData[selectedBranchKey];
            clubNameHeader.innerHTML = `${selectedClub.icon} ${selectedClub.name}`;
            const fullContractHtml = getContractSections(selectedClub).join('<hr style="margin: 20px 0;">');
            contractTextArea.innerHTML = fullContractHtml;
            mainFormContent.style.display = 'block';
        } else {
            mainFormContent.style.display = 'none';
            clubNameHeader.innerHTML = 'ğŸ¾ BranÅŸ SeÃ§iniz';
        }
    });

    const durationSelect = document.getElementById('membershipDuration');
    durationSelect.addEventListener('change', function() {
        document.getElementById('monthlyWarning').style.display = (this.value === 'AylÄ±k') ? 'block' : 'none';
        document.getElementById('fourMonthWarning').style.display = (this.value === '4 AylÄ±k') ? 'block' : 'none';
    });

    const isMinorCheck = document.getElementById('isMinorCheck');
    const minorFullNameInput = document.getElementById('minorFullName');
    const minorDobInput = document.getElementById('minorDob');
    isMinorCheck.addEventListener('change', function() {
        const isChecked = this.checked;
        document.getElementById('minorFields').style.display = isChecked ? 'block' : 'none';
        minorFullNameInput.required = isChecked;
        minorDobInput.required = isChecked;
    });

    // --- Ä°MZA CANVAS ---
    const canvas = document.getElementById('signatureCanvas');
    const ctx = canvas.getContext('2d');
    let hasSignature = false;
    function resizeCanvas(){const container=canvas.parentElement;canvas.width=Math.min(400,container.clientWidth-60);canvas.height=200;ctx.strokeStyle="#2d5a27";ctx.lineWidth=2;ctx.lineCap="round"}window.addEventListener("resize",resizeCanvas);resizeCanvas();let isDrawing=!1;const getCoords=e=>{const t=canvas.getBoundingClientRect(),n=e.touches?e.touches[0]:null;return{x:(n?n.clientX:e.clientX)-t.left,y:(n?n.clientY:e.clientY)-t.top}},startDrawing=e=>{e.preventDefault(),isDrawing=!0,hasSignature=!0;const{x:t,y:n}=getCoords(e);ctx.beginPath(),ctx.moveTo(t,n)},draw=e=>{if(!isDrawing)return;e.preventDefault();const{x:t,y:n}=getCoords(e);ctx.lineTo(t,n),ctx.stroke()},stopDrawing=()=>{isDrawing=!1};canvas.addEventListener("mousedown",startDrawing);canvas.addEventListener("mousemove",draw);canvas.addEventListener("mouseup",stopDrawing);canvas.addEventListener("mouseout",stopDrawing);canvas.addEventListener("touchstart",startDrawing);canvas.addEventListener("touchmove",draw);canvas.addEventListener("touchend",stopDrawing);function clearSignature(){ctx.clearRect(0,0,canvas.width,canvas.height),hasSignature=!1,document.getElementById("signatureWarning").style.display="none"}
    
    // --- ANA FORM GÃ–NDERME MANTIÄI ---
    document.getElementById('membershipForm').addEventListener('submit', async function(e) {
        e.preventDefault();
        if (!hasSignature) { document.getElementById('signatureWarning').style.display = 'block'; return; }
        
        const submitContainer = document.getElementById('submit-container');
        const submitBtn = document.getElementById('submitBtn');
        submitBtn.disabled = true;
        submitBtn.textContent = 'Ä°ÅŸleniyor...';

        const formData = Object.fromEntries(new FormData(this).entries());
        formData.timestamp = new Date().toISOString();
        formData.signature = canvas.toDataURL('image/png');

        try {
            const pdfDoc = await createPdf(formData);
            
            await pdfDoc.save(`${formData.Ad_Soyad.replace(/\s+/g, '_')}_sozlesme.pdf`);
            
            document.getElementById('successMessage').style.display = 'block';
            submitContainer.style.display = 'none';

            const pdfBase64 = pdfDoc.output('datauristring').split(',')[1];
            const webhookPayload = { ...formData, contract_pdf_base64: pdfBase64 };
            
            fetch(webhookUrl, {
                method: 'POST',
                body: JSON.stringify(webhookPayload),
                headers: { 'Content-Type': 'application/json' },
                mode: 'no-cors'
            }).catch(webhookError => {
                 console.error("Webhook gÃ¶nderim hatasÄ± (Bu hata normal olabilir):", webhookError);
            });
            
        } catch (error) {
            console.error("Ana iÅŸlem sÄ±rasÄ±nda hata oluÅŸtu:", error);
            alert("Bir hata oluÅŸtu. LÃ¼tfen tekrar deneyin.");
            submitBtn.disabled = false;
            submitBtn.textContent = 'ğŸ“„ SÃ¶zleÅŸmeyi Ä°mzala ve Onayla';
        }
    });

    // --- PDF OLUÅTURMA FONKSÄ°YONU ---
    async function createPdf(data) {
        const selectedClub = clubData[data.Brans];
        const { jsPDF } = window.jspdf;
        const doc = new jsPDF({ unit: 'pt', format: 'a4' });
        
        const contractParts = getContractSections(selectedClub, data);
        const imagePromises = contractParts.map(async (part, i) => {
            const pageHtml = generatePageHtml(i + 1, part, data, contractParts.length);
            const tempContainer = document.createElement('div');
            tempContainer.style.position = 'absolute';
            tempContainer.style.left = '-9999px';
            tempContainer.innerHTML = pageHtml;
            document.body.appendChild(tempContainer);
            const canvas = await html2canvas(tempContainer.querySelector('.pdf-container'), { scale: 2, useCORS: true });
            document.body.removeChild(tempContainer);
            return canvas.toDataURL('image/jpeg', 0.9);
        });

        const images = await Promise.all(imagePromises);

        images.forEach((imgData, index) => {
            if (index > 0) doc.addPage();
            const imgProps = doc.getImageProperties(imgData);
            const pdfWidth = doc.internal.pageSize.getWidth();
            const imgHeight = (imgProps.height * pdfWidth) / imgProps.width;
            doc.addImage(imgData, 'JPEG', 0, 0, pdfWidth, imgHeight);
        });
        
        return doc;
    }

    // --- YARDIMCI HTML OLUÅTURMA FONKSÄ°YONU ---
    function generatePageHtml(pageNumber, pageContent, d, totalPages) {
        const isFirstPage = pageNumber === 1;
        
        const headerHtml = isFirstPage ? `
            <div class="pdf-section">
                <h3>ÃœYE / VELÄ° BÄ°LGÄ°LERÄ°</h3>
                <p><strong>Ad Soyad:</strong> ${d.Ad_Soyad}</p>
                <p><strong>T.C. Kimlik No:</strong> ${d.TC_Kimlik_No}</p>
                <p><strong>Telefon:</strong> ${d.Telefon}</p>
                <p><strong>E-posta:</strong> ${d.Eposta}</p>
                <p><strong>Adres:</strong> ${d.Adres}</p>
                <p><strong>Ãœyelik SÃ¼resi:</strong> ${d.Uyelik_Suresi}</p>
            </div>
        ` + (d.Resit_Olmayan_Uye_Mi === 'on' ? `
            <div class="pdf-section">
                <h3>REÅÄ°T OLMAYAN ÃœYE BÄ°LGÄ°LERÄ°</h3>
                <p><strong>AdÄ± SoyadÄ±:</strong> ${d.Resit_Olmayan_Adi_Soyadi}</p>
                <p><strong>DoÄŸum Tarihi:</strong> ${d.Resit_Olmayan_Dogum_Tarihi}</p>
            </div>` : '') : '';
        
        const footerHtml = `
            <div class="pdf-section signature-block">
                <h3>ONAY VE Ä°MZA</h3>
                <p>SÃ¶zleÅŸmenin bu sayfasÄ±nÄ± ve tÃ¼mÃ¼nÃ¼ okuduÄŸumu, anladÄ±ÄŸÄ±mÄ± ve kabul ettiÄŸimi beyan ederim.</p>
                <p><strong>Ä°mza Tarihi:</strong> ${new Date(d.timestamp).toLocaleString('tr-TR')}</p>
                <div class="signature-container">
                     <img src="${d.signature}" />
                     <p><strong>Ä°sim Soyisim:</strong><br>${d.Ad_Soyad}</p>
                </div>
            </div>`;

        return `
        <!DOCTYPE html><html lang="tr"><head><meta charset="UTF-8">
        <style>
            body { font-family: 'Helvetica', 'Arial', sans-serif; font-size: 12px; line-height: 1.5; color: #333; }
            .pdf-container { width: 800px; margin: 0 auto; padding: 40px; background: white; border: 1px solid #ccc; display: flex; flex-direction: column; height: 1120px; }
            h1 { font-size: 24px; text-align: center; color: #2d5a27; border-bottom: 2px solid #2d5a27; padding-bottom: 10px; margin-bottom: 20px; }
            .pdf-section { margin-bottom: 15px; padding: 15px; border: 1px solid #e1e5e9; border-radius: 10px; }
            .pdf-section h3 { font-size: 16px; color: #667eea; margin-top: 0; margin-bottom: 10px; }
            .contract { font-size: 10px; flex-grow: 1; } p { margin: 0 0 5px 0; }
            .signature-container { display: flex; align-items: flex-end; margin-top: 20px; }
            .signature-container img { width: 200px; border-bottom: 1px solid #ccc; }
            .signature-container p { margin-left: 20px; padding-bottom: 5px; }
            .page-footer { text-align: center; margin-top: auto; font-size: 10px; color: #888; padding-top: 20px;}
        </style>
        </head><body>
            <div class="pdf-container">
                <div>
                    <h1>${clubData[d.Brans].name} Ãœyelik SÃ¶zleÅŸmesi</h1>
                    ${headerHtml}
                    <div class="pdf-section contract">
                        <h3>SÃ–ZLEÅME METNÄ°</h3>
                        ${pageContent}
                    </div>
                    ${footerHtml}
                </div>
                <div class="page-footer">Sayfa ${pageNumber} / ${totalPages}</div>
            </div>
        </body></html>`;
    }
</script>
</body>
</html>

